(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4485],{23386:function(e,t,n){"use strict";n.d(t,{Ue:function(){return l},CP:function(){return d},sT:function(){return f}});var r=n(809),c=n.n(r),a=n(92447),o=n(94301),s=n.n(o),i=n(82025),u=n(88043),l=function(){var e=(0,a.Z)(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(i.bl,"/category"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}).then((function(e){return(0,u._y)(e),e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s()("".concat(i.bl,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(i.bl,"/category/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return(0,u._y)(e),e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},72199:function(e,t,n){"use strict";n.d(t,{Ue:function(){return l},NJ:function(){return d},tc:function(){return f}});var r=n(809),c=n.n(r),a=n(92447),o=n(94301),s=n.n(o),i=n(82025),u=n(88043),l=function(){var e=(0,a.Z)(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(i.bl,"/tag"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}).then((function(e){return(0,u._y)(e),e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s()("".concat(i.bl,"/tags"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(i.bl,"/tag/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return(0,u._y)(e),e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},17199:function(e,t,n){"use strict";var r=n(85893),c=n(67294),a=n(11163),o=n(88043);t.Z=function(e){var t=e.children;return(0,c.useEffect)((function(){(0,o.$D)()||a.default.push("/signin")}),[]),(0,r.jsx)(c.Fragment,{children:t})}},63278:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(85893),c=n(17199),a=n(71385),o=n(26265),s=n(67294),i=n(11163),u=n(5152),l=n(88043),d=n(23386),f=n(72199),p=n(48975),h={toolbar:[[{header:"1"},{header:"2"},{header:[3,4,5,6]},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],["clean"],[,"code-block"]]},m=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","code-block"],g=n(82025),x=n(85156);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=(0,u.default)((function(){return Promise.all([n.e(9774),n.e(2937),n.e(8764),n.e(1167)]).then(n.t.bind(n,71167,23))}),{ssr:!1,loadableGenerated:{webpack:function(){return[71167]},modules:["..\\components\\crud\\BlogUpdate.js -> react-quill"]}}),v=(0,i.withRouter)((function(e){var t,n=e.router,c=(0,s.useState)(""),u=c[0],b=c[1],v=(0,s.useState)([]),N=v[0],w=v[1],O=(0,s.useState)([]),k=O[0],_=O[1],E=(0,s.useState)([]),Z=E[0],C=E[1],D=(0,s.useState)([]),T=D[0],P=D[1],S=(0,s.useState)((t={title:"",error:"",success:"",formData:""},(0,o.Z)(t,"title",""),(0,o.Z)(t,"body",""),t)),z=S[0],B=S[1],A=z.error,q=z.success,U=z.formData,F=z.title,$=(0,l.ej)("token");(0,s.useEffect)((function(){B(j(j({},z),{},{formData:new FormData})),J(),H(),I()}),[n]);var J=function(){n.query.slug&&(0,p.Ch)(n.query.slug).then((function(e){e.error?console.log(e.error):(B(j(j({},z),{},{title:e.title})),b(e.body),G(e.categories),L(e.tags))}))},G=function(e){var t=[];e.map((function(e,n){t.push(e._id)})),C(t)},L=function(e){var t=[];e.map((function(e,n){t.push(e._id)})),P(t)},H=function(){(0,d.CP)().then((function(e){e.error?B(j(j({},z),{},{error:e.error})):w(e)}))},I=function(){(0,f.NJ)().then((function(e){e.error?B(j(j({},z),{},{error:e.error})):_(e)}))},M=function(e){return function(){B(j(j({},z),{},{error:""}));var t=Z.indexOf(e),n=(0,a.Z)(Z);-1===t?n.push(e):n.splice(t,1),C(n),U.set("categories",n)}},X=function(e){return function(){B(j(j({},z),{},{error:""}));var t=T.indexOf(e),n=(0,a.Z)(T);-1===t?n.push(e):n.splice(t,1),P(n),U.set("tags",n)}},R=function(e){return-1!==Z.indexOf(e)},W=function(e){return-1!==T.indexOf(e)},K=function(e){return function(t){var n,r="photo"===e?t.target.files[0]:t.target.value;U.set(e,r),B(j(j({},z),{},(n={},(0,o.Z)(n,e,r),(0,o.Z)(n,"formData",U),(0,o.Z)(n,"error",""),n)))}},Q=function(e){b(e),U.set("body",e)},V=function(e){e.preventDefault(),U.append("title",z.title),U.append("body",u),(0,p.zZ)(U,$,n.query.slug).then((function(e){e.error?B(j(j({},z),{},{error:"Blog could not be updated"})):(B(j(j({},z),{},{title:"",success:'Blog titled "'.concat(e.title,'" is successfully updated')})),(0,l.$D)()&&1===(0,l.$D)().role?i.default.replace("/admin"):(0,l.$D)()&&0===(0,l.$D)().role&&i.default.replace("/user"))}))};return(0,r.jsx)("section",{className:"blogCreate",children:(0,r.jsxs)("div",{className:"createMain",children:[(0,r.jsxs)("div",{className:"blogDiv",children:[(0,r.jsx)("h1",{className:"large text-primary",children:"Update Blog"}),(0,r.jsx)("div",{className:"badge badge-danger p-1",style:{display:A?"":"none"},children:A}),(0,r.jsx)("div",{className:"badge badge-success p-1",style:{display:q?"":"none"},children:q}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"createForm",children:[(0,r.jsxs)("form",{className:"form",onSubmit:V,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-primary",children:"Title"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{className:"form-group",type:"text",value:F,onChange:K("title")})]}),(0,r.jsx)(y,{modules:h,formats:m,value:u,placeholder:"Write something amazing...",onChange:Q}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",className:"btn nbtn btn-dark",children:"Update"})})]}),(0,r.jsx)("div",{className:"line"}),u&&(0,r.jsx)("img",{src:"".concat(g.bl,"/blogs/photo/").concat(n.query.slug),alt:F,style:{width:"100%"}})]})]}),(0,r.jsxs)("div",{className:"catagoriesTags",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-primary",children:"Featured Image"}),(0,r.jsx)("small",{className:"text-light-gray",children:"Max size: 1mb"}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{className:" btn btn-dark nbtn",children:["Upload Featured Image",(0,r.jsx)("input",{onChange:K("photo"),type:"file",accept:"image/*",hidden:!0})]}),(0,r.jsx)("div",{className:"line"})]}),(0,r.jsxs)("div",{className:"checkList",children:[(0,r.jsxs)("ul",{style:{maxHeight:"200px"},children:[(0,r.jsx)("h3",{className:"text-primary",children:"Categories"}),(0,r.jsx)("small",{className:"text-light-gray",children:"Edit the Categories related to your blog"}),N&&N.map((function(e,t){return(0,r.jsxs)("li",{children:[(0,r.jsx)(x.Z,{onChange:M(e._id),checked:R(e._id)}),(0,r.jsx)("label",{children:e.name})]},t)}))]}),(0,r.jsxs)("ul",{style:{maxHeight:"200px"},children:[(0,r.jsx)("h3",{className:"text-primary",children:"Tags"}),(0,r.jsx)("small",{className:"text-light-gray",children:"Edit the Tags of your blog"}),k&&k.map((function(e,t){return(0,r.jsxs)("li",{children:[(0,r.jsx)(x.Z,{onChange:X(e._id),checked:W(e._id)}),(0,r.jsx)("label",{children:e.name})]},t)}))]})]})]})]})})})),N=n(9008),w=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(N.default,{children:[(0,r.jsxs)("title",{children:["Update Blog |The ",g.iC]}),(0,r.jsx)("meta",{name:"robots",content:"noindex nofollow"})]}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(v,{})})]})}},38949:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/crud/[slug]",function(){return n(63278)}])}},function(e){e.O(0,[323,8975,9774,2888,179],(function(){return t=38949,e(e.s=t);var t}));var t=e.O();_N_E=t}]);