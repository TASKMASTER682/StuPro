(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4460],{23386:function(e,t,n){"use strict";n.d(t,{Ue:function(){return l},CP:function(){return d},sT:function(){return p}});var r=n(809),a=n.n(r),c=n(92447),s=n(94301),o=n.n(s),i=n(82025),u=n(88043),l=function(){var e=(0,c.Z)(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()("".concat(i.bl,"/category"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}).then((function(e){return(0,u._y)(e),e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,c.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o()("".concat(i.bl,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()("".concat(i.bl,"/category/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return(0,u._y)(e),e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},72199:function(e,t,n){"use strict";n.d(t,{Ue:function(){return l},NJ:function(){return d},tc:function(){return p}});var r=n(809),a=n.n(r),c=n(92447),s=n(94301),o=n.n(s),i=n(82025),u=n(88043),l=function(){var e=(0,c.Z)(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()("".concat(i.bl,"/tag"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}).then((function(e){return(0,u._y)(e),e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,c.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o()("".concat(i.bl,"/tags"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()("".concat(i.bl,"/tag/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return(0,u._y)(e),e.json()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},75787:function(e,t,n){"use strict";var r=n(85893),a=n(67294),c=n(11163),s=n(88043);t.Z=function(e){var t=e.children;return(0,a.useEffect)((function(){(0,s.$D)()?1!==(0,s.$D)().role&&c.default.push("/"):c.default.push("/signin")}),[]),(0,r.jsx)(a.Fragment,{children:t})}},87613:function(e,t,n){"use strict";n.d(t,{nH:function(){return o},YM:function(){return i},vW:function(){return d},nX:function(){return p}});var r=n(26265),a=(n(67294),n(70807));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o=s(s({},(0,a.mbl)()),{},(0,r.Z)({},a.sTz,(0,a.vl2)(a.rVG,{styles:{root:{backgroundColor:"#111827",selectors:{code:{color:"white"}}}}}))),i=(0,a.O_e)(),u={types:[a.GDC,a.oGK,a.o3Y,a.jB_,a.$H6,a.KWL,a.ahg,a.sTz,a.Zvw],defaultType:a.JBe},l={rules:[s(s({},u),{},{hotkey:"Enter",predicate:a.ptC}),s(s({},u),{},{hotkey:"Backspace",predicate:a._YE})]},d=[(0,a.SPV)(),(0,a.JE4)(),(0,a.qpA)(),(0,a.V8Y)(),(0,a.gH_)(l),(0,a.ZZF)(),(0,a.DLO)(),(0,a._8X)(),(0,a.DRt)(),(0,a.SNQ)(),(0,a.Tvz)(),(0,a.w4y)(),(0,a.cB2)({allow:[a.IVr]}),(0,a.cB2)({allow:[a.vdJ]}),(0,a.BM4)(),(0,a.pJg)(),(0,a.Td$)(),(0,a.wFy)(),(0,a.Hon)(),(0,a.sWz)(),(0,a.oyw)(),(0,a.fSR)()],p=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=void 0===n?a.JBe:n,c=t.mark,s={text:e};return c&&(s[c]=!0),{type:r,children:[s]}}("Write Something amazing that helps the students and job seekers...",{type:a.JBe})]},66391:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(85893),a=n(84830),c=n(75787),s=n(71385),o=n(26265),i=n(67294),u=n(11163),l=n(5152),d=n(88043),p=n(23386),f=n(72199),h=n(48975),g=n(82025),m=n(85156),j=n(70807),x=n(87613);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=(0,l.default)((function(){return Promise.all([n.e(585),n.e(677)]).then(n.bind(n,40677))}),{loading:function(){return""},ssr:!1,loadableGenerated:{webpack:function(){return[40677]},modules:["..\\components\\crud\\AdminBlogUpdate.js -> ../slate-plugins/index"]}}),O=(0,u.withRouter)((function(e){var t=e.router,n=(0,i.useState)(""),a=n[0],c=n[1],l=(0,i.useState)([]),b=l[0],O=l[1],N=(0,i.useState)([]),w=N[0],D=N[1],_=(0,i.useState)([]),k=_[0],C=_[1],E=(0,i.useState)([]),P=E[0],T=E[1],Z=(0,i.useState)({title:"",error:"",success:"",formData:"",body:"",subtitle:"",language:"",desc:""}),S=Z[0],B=Z[1],z=S.error,J=S.success,A=S.formData,$=S.title,F=S.subtitle,L=S.desc,U=S.language,q=(0,d.ej)("token");(0,i.useEffect)((function(){B(y(y({},S),{},{formData:new FormData})),G(),I(),M()}),[t]);var G=function(){t.query.slug&&(0,h.Ch)(t.query.slug).then((function(e){e.error?console.log(e.error):(B(y(y({},S),{},{subtitle:e.subtitle||"",desc:e.desc||"",language:e.language,title:e.title})),c(e.body),H(e.categories),W(e.tags))}))},H=function(e){var t=[];e.map((function(e,n){t.push(e._id)})),C(t)},W=function(e){var t=[];e.map((function(e,n){t.push(e._id)})),T(t)},I=function(){(0,p.CP)().then((function(e){e.error?B(y(y({},S),{},{error:e.error})):O(e)}))},M=function(){(0,f.NJ)().then((function(e){e.error?B(y(y({},S),{},{error:e.error})):D(e)}))},V=function(e){return function(){B(y(y({},S),{},{error:""}));var t=k.indexOf(e),n=(0,s.Z)(k);-1===t?n.push(e):n.splice(t,1),C(n),A.set("categories",n)}},X=function(e){return function(){B(y(y({},S),{},{error:""}));var t=P.indexOf(e),n=(0,s.Z)(P);-1===t?n.push(e):n.splice(t,1),T(n),A.set("tags",n)}},Y=function(e){return-1!==k.indexOf(e)},R=function(e){return-1!==P.indexOf(e)},K=function(e){return function(t){var n,r="photo"===e?t.target.files[0]:t.target.value;A.set(e,r),B(y(y({},S),{},(n={},(0,o.Z)(n,e,r),(0,o.Z)(n,"formData",A),(0,o.Z)(n,"error",""),n)))}},Q=function(e){c(e);var t=(0,s.Z)(e),n=(0,j.mhf)(),r=(0,j.aD$)(n,{plugins:x.vW,nodes:t});A.set("body",e),localStorage.setItem("blog",JSON.stringify(r))},ee=function(e){e.preventDefault(),A.append("title",S.title),A.append("subtitle",S.subtitle),A.append("desc",S.desc),A.append("language",S.language),A.append("body",a),(0,h.zZ)(A,q,t.query.slug).then((function(e){e.error?B(y(y({},S),{},{error:"Blog could not be updated"})):(B(y(y({},S),{},{title:"",subtitle:"",desc:"",language:"",success:'Blog titled "'.concat(e.title,'" is successfully updated')})),(0,d.$D)()&&1===(0,d.$D)().role?u.default.replace("/admin"):(0,d.$D)()&&0===(0,d.$D)().role&&u.default.replace("/user"))}))};return(0,r.jsx)("section",{className:"blogCreate",children:(0,r.jsxs)("div",{className:"createMain",children:[(0,r.jsxs)("div",{className:"blogDiv",children:[(0,r.jsx)("h1",{className:"large text-primary",children:"Update Blog"}),(0,r.jsx)("div",{className:"badge badge-danger p-1",style:{display:z?"":"none"},children:z}),(0,r.jsx)("div",{className:"badge badge-success p-1",style:{display:J?"":"none"},children:J}),(0,r.jsx)("div",{className:"line"}),(0,r.jsxs)("div",{className:"createForm",children:[(0,r.jsxs)("form",{className:"form",onSubmit:ee,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-primary",children:"Title"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{className:"form-group",type:"text",value:$,onChange:K("title")})]}),(0,r.jsx)("div",{className:"form-group",children:(0,r.jsxs)("select",{name:"Language",value:U,onChange:K("language"),required:!0,children:[(0,r.jsx)("option",{value:"0",children:"Select Language"}),(0,r.jsx)("option",{value:"en",children:"en"}),(0,r.jsx)("option",{value:"hi",children:"hi"})]})}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-primary",children:"Sub-Title"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{className:"form-group",type:"text",value:F,onChange:K("subtitle")})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-primary",children:"Description"}),(0,r.jsx)("br",{}),(0,r.jsx)("textarea",{className:"blog textinput",placeholder:"Blog Description",maxLength:"160",value:L,onChange:K("desc")}),(0,r.jsxs)("h2",{className:"text-primary",children:[160-L.length,"/160"]})]}),(0,r.jsx)(v,{handleChange:Q}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",className:"btn nbtn btn-dark my-1",children:"Update"})})]}),(0,r.jsx)("div",{className:"line"}),a&&(0,r.jsx)("img",{src:"".concat(g.bl,"/blogs/photo/").concat(t.query.slug),alt:$,style:{width:"100%"}})]})]}),(0,r.jsxs)("div",{className:"catagoriesTags",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-primary",children:"Featured Image"}),(0,r.jsx)("small",{className:"text-light-gray",children:"Max size: 1mb"}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{className:" btn btn-dark nbtn",children:["Upload Featured Image",(0,r.jsx)("input",{onChange:K("photo"),type:"file",accept:"image/*",hidden:!0})]}),(0,r.jsx)("div",{className:"line"})]}),(0,r.jsxs)("div",{className:"checkList",children:[(0,r.jsxs)("ul",{style:{maxHeight:"200px"},children:[(0,r.jsx)("h3",{className:"text-primary",children:"Categories"}),(0,r.jsx)("small",{className:"text-light-gray",children:"Edit the Categories related to your blog"}),b&&b.map((function(e,t){return(0,r.jsxs)("li",{children:[(0,r.jsx)(m.Z,{onChange:V(e._id),checked:Y(e._id)}),(0,r.jsx)("label",{children:e.name})]},t)}))]}),(0,r.jsxs)("ul",{style:{maxHeight:"200px"},children:[(0,r.jsx)("h3",{className:"text-primary",children:"Tags"}),(0,r.jsx)("small",{className:"text-light-gray",children:"Edit the Tags of your blog"}),w&&w.map((function(e,t){return(0,r.jsxs)("li",{children:[(0,r.jsx)(m.Z,{onChange:X(e._id),checked:R(e._id)}),(0,r.jsx)("label",{children:e.name})]},t)}))]})]})]})]})})})),N=n(9008),w=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(N.default,{children:[(0,r.jsxs)("title",{children:["Update Blog | The ",g.iC]}),(0,r.jsx)("meta",{name:"robots",content:"noindex nofollow"})]}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(c.Z,{children:(0,r.jsx)(O,{})})})]})}},50321:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/[slug]",function(){return n(66391)}])}},function(e){e.O(0,[9774,323,807,8975,2888,179],(function(){return t=50321,e(e.s=t);var t}));var t=e.O();_N_E=t}]);